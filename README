# Multi-Tenant CRM API (SaaS Backend)

This project is a backend API for a Multi-Tenant CRM system, built as part of the GPP Weekly Task-4. The goal of this application is to demonstrate secure multi-tenancy, where multiple organizations (tenants) share the same application while maintaining strict data isolation. No organization can access or view another organization’s data under any circumstance.

## Project Overview

The backend supports:
- User registration under an organization
- Secure login via JWT
- Organization and role stored inside tokens
- Tenant-based data isolation
- Protected CRUD operations for CRM contacts

This project focuses on backend architecture, security, and correctness, not UI.

## Key Features

- User registration with automatic organization creation
- User login with JWT token generation
- Password hashing via bcrypt (Passlib)
- Multi-tenant isolation using organization_id
- Protected API routes with JWT authentication
- Contacts CRUD (create & view)
- Users can only access data from their own organization
- Swagger/OpenAPI documentation enabled
- Test suite validates authentication, RBAC, and multi-tenancy

## Multi-Tenancy Architecture

- Each user belongs to one organization
- Protected tables include organization_id
- JWT tokens include user_id, organization_id, and role
- Every request enforces tenant boundaries
- Cross-tenant access is blocked at application layer

Architecture model used: Shared Database + Shared Schema, a common SaaS pattern balancing performance, cost, and scalability.

## Role-Based Access Control (RBAC)

| Role   | Permissions |
|--------|-------------|
| Owner  | Full access within organization |
| Admin  | Manage users & contacts (future scope) |
| Member | Create & view contacts |
| Viewer | View contacts only |

The implementation stores roles and enforces them through authorization layers.

## Technology Stack

- Python
- FastAPI
- SQLAlchemy ORM
- PostgreSQL
- JWT (python-jose)
- Passlib (bcrypt)
- Uvicorn
- Swagger/OpenAPI

## API Endpoints

Authentication:
- POST /auth/register → Register user + create organization
- POST /auth/login → Login and receive JWT token

Contacts (Protected):
- POST /contacts → Create contact (tenant-scoped)
- GET /contacts → List contacts (tenant-scoped)

All protected endpoints require Authorization: Bearer <token>.

## Running the Project

1. Copy environment template  
cp .env.example .env

2. Activate virtual environment  
venv\Scripts\activate

3. Run server  
python -m uvicorn app.main:app --reload

4. Open Swagger UI  
http://127.0.0.1:8000/docs

## Security Behaviors Verified

- Users from one organization cannot access another organization’s contacts
- Token required for protected routes (401 otherwise)
- Invalid/expired tokens reject access
- Passwords stored using bcrypt hashing
- Tenant isolation enforced at ORM query level

## Testing

Automated tests include:
✔ Authentication  
✔ RBAC  
✔ Tenant isolation  
✔ Contact CRUD  

Run tests:
pytest -q

## Final Note

This project demonstrates a production-oriented SaaS backend architecture with multi-tenancy, RBAC, JWT authentication, and strict data isolation. It aligns with real-world backend engineering standards and is suitable for portfolio and evaluation use.
