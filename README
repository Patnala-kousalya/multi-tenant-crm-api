# Multi-Tenant CRM API (SaaS Backend)

This project is a backend API for a **Multi-Tenant CRM system**, built as part of the **GPP Weekly Task-4**.

The main objective of this project is to demonstrate **secure multi-tenancy**, where multiple organizations (tenants) use the same application while ensuring **strict data isolation**.

No organization can access or view another organization’s data under any circumstance.

---

## Project Overview

This CRM API provides:
- User registration under an organization
- Secure user login
- JWT-based authentication
- Organization and role embedded inside JWT tokens
- Organization-level data isolation
- Protected CRM resources (Contacts)

This project focuses on **backend architecture, security, and correctness**, not UI.

---

## Key Features Implemented

- User Registration with automatic Organization creation
- User Login with JWT token generation
- Password hashing using bcrypt
- Multi-tenant data isolation using `organization_id`
- Protected APIs using JWT authentication
- Contacts CRUD (Create & View)
- Users can only access contacts belonging to their own organization
- Swagger (OpenAPI) documentation enabled

---

## Multi-Tenancy Architecture

- Each user belongs to exactly one organization
- All protected database tables include `organization_id`
- JWT token contains:
  - `user_id`
  - `organization_id`
  - `role`
- Every request validates organization ownership
- Cross-organization access is strictly blocked

This project uses a **shared database, shared schema** multi-tenant design.

---

## Role-Based Access Control (RBAC)

| Role   | Permissions |
|-------|-------------|
| Owner | Full access within own organization |
| Admin | Manage users & contacts (future scope) |
| Member | Create and view contacts |
| Viewer | View-only access |

(Current implementation stores roles and is RBAC-ready.)

---

## Technology Stack

- Python
- FastAPI
- PostgreSQL
- SQLAlchemy ORM
- JWT (python-jose)
- Passlib + bcrypt (password hashing)
- Uvicorn
- Swagger / OpenAPI

---

## API Endpoints

### Authentication
- `POST /auth/register` – Register user and create organization
- `POST /auth/login` – Login and receive JWT token

### Contacts (Protected)
- `POST /contacts` – Create contact (own organization only)
- `GET /contacts` – View contacts (own organization only)

All protected routes require a valid JWT token.

---

## How to Run the Project

1. Activate virtual environment:
```
venv\Scripts\activate
```

2. Start the server:
```
python -m uvicorn app.main:app --reload
```

3. Open Swagger UI:
```
http://127.0.0.1:8000/docs
```
Security Tests:
- User from Org A cannot access contacts from Org B
- JWT token required for protected routes
- Invalid token returns 401

---

## Final Note

This project demonstrates a **real-world SaaS backend pattern** with secure multi-tenancy, authentication, and data isolation.

It is production-oriented in design and suitable for backend engineering evaluations and interviews.
